<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

  {%- include head.html -%}

  <body>

    {%- include header.html -%}

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        {{ content }}
      </div>
    </main>

    {%- include footer.html -%}

    <script>
    (function() {
      var toggle = document.getElementById('theme-toggle');
      var menu = document.getElementById('theme-menu');
      var options = document.querySelectorAll('.theme-option');
      if (!toggle || !menu) return;

      var saved = localStorage.getItem('blog-theme') || 'museum';

      function setActive() {
        options.forEach(function(opt) {
          opt.classList.toggle('active', opt.getAttribute('data-theme') === saved);
        });
      }
      setActive();

      toggle.addEventListener('click', function(e) {
        e.stopPropagation();
        menu.classList.toggle('open');
      });

      options.forEach(function(opt) {
        opt.addEventListener('click', function(e) {
          e.stopPropagation();
          var theme = opt.getAttribute('data-theme');
          saved = theme;
          if (theme === 'museum') {
            document.documentElement.removeAttribute('data-theme');
            localStorage.removeItem('blog-theme');
          } else {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('blog-theme', theme);
          }
          setActive();
          menu.classList.remove('open');
        });
      });

      document.addEventListener('click', function() {
        menu.classList.remove('open');
      });
    })();
    </script>

    {%- if page.mermaid -%}
      {%- include footer-scripts.html -%}
    {%- endif -%}

  </body>

</html>
